{"globals":[],"triggers":[{"config":{},"outputIds":[["ryjZEiNJM","rygsZNsVkM","Bkrs-NoVJM"]],"key":"DeviceRecipe/Asset","type":"deviceTag","meta":{"category":"trigger","name":"deviceIdsTags","label":"Device: State","x":420,"y":140,"uiId":"rywj-NjNkz","description":""}}],"nodes":[{"type":"DebugNode","meta":{"category":"output","name":"debug","label":"Debug","x":760,"y":300,"description":""},"config":{"message":"","property":""},"id":"ryjZEiNJM","outputIds":[]},{"type":"LatchNode","meta":{"category":"logic","name":"latch","label":"is Moving","x":480,"y":300,"description":""},"config":{"latchExpression":"{{ data.movementStatus }} === true","resetExpression":"({{ data.movementStatus }} !== undefined) && ({{ data.movementStatus }} === false)","latchResultPath":"","resetResultPath":"","wasLatchedPath":"","isLatchedPath":"","branchPath":"","latchIdTemplate":"{{deviceName}}"},"id":"rygsZNsVkM","outputIds":[["r1R0SiN1f"],["Skbs-Vi4kz"]]},{"type":"MutateNode","meta":{"category":"logic","name":"mutate","label":"Mutate","x":480,"y":420,"description":""},"config":{"rules":[{"type":"set","destination":"data.emailSubject","valueTemplate":"{{deviceName}} is in transit"},{"type":"set","destination":"data.emailBody","valueTemplate":"{{deviceName}} is in transit. It is moving {{ format data.speedMPH 'd' }} mph."},{"type":"set","destination":"data.smsBody","valueTemplate":"{{deviceName}} is in transit. It is moving {{ format data.speedMPH 'd' }} mph."}]},"id":"Skbs-Vi4kz","outputIds":[["H1Go-NjNyM"]]},{"type":"WorkflowTriggerNode","meta":{"category":"output","name":"workflow-trigger","label":"Email Alerts","x":280,"y":720,"description":""},"config":{"triggerWorkflowId":"5a0717e558025a00072bdc50","triggerVirtualButtonId":"HkeOgu5VJf","payloadTemplate":"data","payloadTemplateType":"path"},"id":"SJQj-NsVJG","outputIds":[]},{"type":"WorkflowTriggerNode","meta":{"category":"output","name":"workflow-trigger","label":"SMS Alerts","x":500,"y":720,"description":""},"config":{"triggerWorkflowId":"5a0717fe2f3b7d0006343a2f","triggerVirtualButtonId":"SJglzu5EJz","payloadTemplate":"data","payloadTemplateType":"path"},"id":"ryEjZ4i41M","outputIds":[]},{"type":"DebugNode","meta":{"category":"output","name":"debug","label":"Check","x":380,"y":600,"description":""},"config":{"message":"","property":""},"id":"H1Go-NjNyM","outputIds":[["ryEjZ4i41M","SJQj-NsVJG"]]},{"type":"LatchNode","meta":{"category":"logic","name":"latch","label":"Is OK again","x":240,"y":300,"description":""},"config":{"latchExpression":"({{ data.movementStatus }} !== undefined) && ({{ data.movementStatus }} === false)","resetExpression":"{{ data.movementStatus }} === true","latchResultPath":"","resetResultPath":"","wasLatchedPath":"","isLatchedPath":"","branchPath":"","latchIdTemplate":"{{deviceName}}"},"id":"Bkrs-NoVJM","outputIds":[[],["ByUiZ4oEJz"]]},{"type":"MutateNode","meta":{"category":"logic","name":"mutate","label":"Mutate","x":260,"y":420,"description":""},"config":{"rules":[{"type":"set","destination":"data.emailSubject","valueTemplate":"{{deviceName}}: Idle"},{"type":"set","destination":"data.emailBody","valueTemplate":"{{deviceName}} is {{ format data.milesFromCenter 'd' }} mi. away. It is idle at {{ data.gpsLocation }}."},{"type":"set","destination":"data.smsBody","valueTemplate":"{{deviceName}} is {{ format data.milesFromCenter 'd' }} mi. away. It is idle at {{ data.gpsLocation }}."}]},"id":"ByUiZ4oEJz","outputIds":[["H1Go-NjNyM"]]},{"type":"DebugNode","meta":{"category":"output","name":"debug","label":"no move","x":0,"y":440,"description":""},"config":{"message":"","property":""},"id":"r1R0SiN1f","outputIds":[]}],"name":"Movement Alert","enabled":true,"description":"","applicationId":"59b839de38c9e000072e5855","_type":"flow","_exportDate":"2018-01-30T14:25:58.713Z"}