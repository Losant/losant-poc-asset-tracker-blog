{"globals":[],"triggers":[{"config":{},"outputIds":[["rJOFmyOpb","HJcOins6-"]],"key":"DeviceRecipe/GL505","type":"deviceTag","meta":{"category":"trigger","name":"deviceIdsTags","label":"GL505 State","x":380,"y":80,"uiId":"H1UU4gD5b","description":""}}],"nodes":[{"type":"DeviceChangeStateNode","meta":{"category":"output","name":"device-state","label":"Update Asset","x":380,"y":1020,"description":""},"config":{"deviceIdTemplateType":"jsonPath","timeSourceType":"payloadTime","attrDataMethod":"payloadPath","deviceId":"asset.id","attrPayloadPath":"data"},"id":"H1AqDgDcW","outputIds":[["ByqVpcVkf"]]},{"type":"GeofenceNode","meta":{"category":"logic","name":"geofence","label":"Geofence","x":380,"y":320,"description":""},"config":{"checkType":"radius","gpsCheck":"{{ data.gpsLocation }}","gpsCenter":"{{ globals.GEOFENCE_CENTER }}","radius":"{{ geofenceLimitMeters }} ","resultPath":"data.metersFromCenter","branchPath":"isInsideGeofence"},"id":"SJMkd_LpW","outputIds":[["SkHS35E1f"],["S1TG2qEyz"]]},{"type":"DebugNode","meta":{"category":"output","name":"debug","label":"Debug","x":640,"y":220,"description":""},"config":{"message":"","property":""},"id":"rJOFmyOpb","outputIds":[]},{"type":"MathNode","meta":{"category":"logic","name":"math","label":"Miles from Center","x":380,"y":660,"description":""},"config":{"statements":[{"expression":"{{ data.metersFromCenter }}*0.000621371","resultPath":"data.milesFromCenter"}]},"id":"BJNxdqi6-","outputIds":[["H1DTZcVkf"]]},{"type":"MathNode","meta":{"category":"logic","name":"math","label":"To Metric","x":380,"y":220,"description":""},"config":{"statements":[{"expression":"{{ globals.GEOFENCE_LIMIT_MILES }} * 1609.34","resultPath":"geofenceLimitMeters"}]},"id":"HJcOins6-","outputIds":[["SJMkd_LpW"]]},{"type":"GetDeviceNode","meta":{"category":"data","name":"get-device","label":"Get Asset","x":380,"y":780,"description":""},"config":{"findMethod":"tags","resultPath":"asset","tagsAsObject":false,"findMultiple":false,"tags":[{"keyTemplate":"IMEI","valueTemplate":"{{ deviceTags.IMEI.[0] }}"}]},"id":"H1DTZcVkf","outputIds":[["SJCQzcNyG"]]},{"type":"ConditionalNode","meta":{"category":"logic","name":"conditional","label":"Asset Exist?","x":380,"y":900,"description":""},"config":{"expression":"{{ asset }}"},"id":"SJCQzcNyG","outputIds":[[],["H1AqDgDcW"]]},{"type":"MutateNode","meta":{"category":"logic","name":"mutate","label":"Outside false","x":500,"y":480,"description":""},"config":{"rules":[{"type":"set","destination":"data.isOutsideGeofence","valueTemplate":"false"}]},"id":"S1TG2qEyz","outputIds":[["BJNxdqi6-"]]},{"type":"MutateNode","meta":{"category":"logic","name":"mutate","label":"Outside true","x":260,"y":480,"description":""},"config":{"rules":[{"type":"set","destination":"data.isOutsideGeofence","valueTemplate":"true"}]},"id":"SkHS35E1f","outputIds":[["BJNxdqi6-"]]},{"type":"DebugNode","meta":{"category":"output","name":"debug","label":"Debug","x":380,"y":1160,"description":""},"config":{"message":"","property":""},"id":"ByqVpcVkf","outputIds":[]}],"name":"GL505 Report","enabled":true,"description":"","applicationId":"59b839de38c9e000072e5855","_type":"flow","_exportDate":"2018-01-30T14:24:37.494Z"}